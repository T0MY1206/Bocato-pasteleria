<!-- Calculadora de Pedidos Avanzada -->
<div class="calculator-container bg-white rounded-2xl shadow-lg p-6">
  <div class="calculator-header mb-6">
    <h3 class="text-2xl font-bold text-caramel mb-2">
      <i class="bi bi-calculator mr-2"></i>
      Calculadora de Pedidos
    </h3>
    <p class="text-gray-600">Calcula el pedido perfecto para tu evento</p>
  </div>

  <!-- Formulario de cálculo -->
  <form (ngSubmit)="calculateOrder()" class="space-y-6">
    <!-- Información del evento -->
    <div class="event-info-section">
      <h4 class="text-lg font-semibold text-gray-800 mb-4">Información del Evento</h4>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Número de invitados -->
        <div class="form-group">
          <label class="block text-sm font-medium text-gray-700 mb-2">
            Número de Invitados <span class="text-red-500">*</span>
          </label>
          <div class="relative">
            <input 
              type="number" 
              [(ngModel)]="calculator.guestCount"
              name="guestCount"
              min="10"
              max="200"
              required
              class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-caramel focus:border-transparent transition-all duration-300">
            <div class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400">
              <i class="bi bi-people"></i>
            </div>
          </div>
          <div class="mt-2">
            <div class="w-full bg-gray-200 rounded-full h-2">
              <div class="bg-caramel h-2 rounded-full transition-all duration-300" 
                   [style.width.%]="(calculator.guestCount / 200) * 100"></div>
            </div>
            <div class="flex justify-between text-xs text-gray-500 mt-1">
              <span>10</span>
              <span>{{ calculator.guestCount }}</span>
              <span>200+</span>
            </div>
          </div>
        </div>

        <!-- Tipo de evento -->
        <div class="form-group">
          <label class="block text-sm font-medium text-gray-700 mb-2">
            Tipo de Evento <span class="text-red-500">*</span>
          </label>
          <select 
            [(ngModel)]="calculator.eventType"
            name="eventType"
            required
            class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-caramel focus:border-transparent">
            <option value="">Selecciona el tipo de evento</option>
            <option value="cumpleanos">Cumpleaños</option>
            <option value="boda">Boda</option>
            <option value="corporativo">Evento Corporativo</option>
            <option value="graduacion">Graduación</option>
            <option value="baby-shower">Baby Shower</option>
            <option value="otro">Otro</option>
          </select>
        </div>

        <!-- Presupuesto -->
        <div class="form-group">
          <label class="block text-sm font-medium text-gray-700 mb-2">
            Presupuesto Estimado
          </label>
          <div class="relative">
            <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500">$</span>
            <input 
              type="number" 
              [(ngModel)]="calculator.budget"
              name="budget"
              min="5000"
              max="100000"
              step="1000"
              class="w-full pl-8 pr-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-caramel focus:border-transparent">
          </div>
          <div class="mt-2">
            <div class="w-full bg-gray-200 rounded-full h-2">
              <div class="bg-green-500 h-2 rounded-full transition-all duration-300" 
                   [style.width.%]="(calculator.budget / 100000) * 100"></div>
            </div>
            <div class="flex justify-between text-xs text-gray-500 mt-1">
              <span>$5K</span>
              <span>${{ calculator.budget | number }}</span>
              <span>$100K+</span>
            </div>
          </div>
        </div>

        <!-- Preferencias -->
        <div class="form-group">
          <label class="block text-sm font-medium text-gray-700 mb-2">
            Preferencias Especiales
          </label>
          <div class="space-y-2">
            <label class="flex items-center">
              <input 
                type="checkbox" 
                [(ngModel)]="preferences.sinGluten"
                name="sinGluten"
                class="mr-2 text-caramel focus:ring-caramel">
              <span class="text-sm text-gray-700">Sin Gluten</span>
            </label>
            <label class="flex items-center">
              <input 
                type="checkbox" 
                [(ngModel)]="preferences.vegano"
                name="vegano"
                class="mr-2 text-caramel focus:ring-caramel">
              <span class="text-sm text-gray-700">Opciones Veganas</span>
            </label>
            <label class="flex items-center">
              <input 
                type="checkbox" 
                [(ngModel)]="preferences.sugarFree"
                name="sugarFree"
                class="mr-2 text-caramel focus:ring-caramel">
              <span class="text-sm text-gray-700">Sin Azúcar</span>
            </label>
            <label class="flex items-center">
              <input 
                type="checkbox" 
                [(ngModel)]="preferences.entrega"
                name="entrega"
                class="mr-2 text-caramel focus:ring-caramel">
              <span class="text-sm text-gray-700">Entrega a Domicilio</span>
            </label>
          </div>
        </div>
      </div>
    </div>

    <!-- Botón de cálculo -->
    <div class="text-center">
      <button 
        type="submit"
        class="px-8 py-3 bg-caramel text-white rounded-xl hover:bg-caramel-dark transition-all duration-300 transform hover:scale-105 hover:-translate-y-1 shadow-lg hover:shadow-xl">
        <i class="bi bi-calculator mr-2"></i>
        Calcular Pedido
      </button>
    </div>
  </form>

  <!-- Resultados del cálculo -->
  <div *ngIf="calculatedOrder" class="results-section mt-8 p-6 bg-gradient-to-br from-amber-50 to-orange-50 rounded-xl border border-amber-200">
    <h4 class="text-xl font-bold text-caramel mb-4">
      <i class="bi bi-check-circle mr-2"></i>
      Pedido Recomendado: {{ calculatedOrder.recommendedPackage }}
    </h4>

    <!-- Resumen del pedido -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
      <div class="stat-card bg-white rounded-lg p-4 text-center shadow-sm">
        <div class="text-2xl font-bold text-caramel">{{ calculatedOrder.totalPrice | currency:'ARS':'symbol':'1.0-0' }}</div>
        <div class="text-sm text-gray-600">Precio Total</div>
      </div>
      <div class="stat-card bg-white rounded-lg p-4 text-center shadow-sm">
        <div class="text-2xl font-bold text-green-600">{{ calculatedOrder.savings | currency:'ARS':'symbol':'1.0-0' }}</div>
        <div class="text-sm text-gray-600">Ahorro vs Presupuesto</div>
      </div>
      <div class="stat-card bg-white rounded-lg p-4 text-center shadow-sm">
        <div class="text-2xl font-bold text-blue-600">{{ calculatedOrder.preparationTime }}h</div>
        <div class="text-sm text-gray-600">Tiempo de Preparación</div>
      </div>
    </div>

    <!-- Items del pedido -->
    <div class="order-items mb-6">
      <h5 class="text-lg font-semibold text-gray-800 mb-3">Items Incluidos:</h5>
      <div class="space-y-3">
        <div *ngFor="let item of calculatedOrder?.items || []" 
             class="flex justify-between items-center p-3 bg-white rounded-lg shadow-sm">
          <div class="flex-1">
            <div class="font-medium text-gray-800">{{ item.name }}</div>
            <div class="text-sm text-gray-600">Cantidad: {{ item.quantity }}</div>
          </div>
          <div class="text-right">
            <div class="font-semibold text-caramel">{{ item.totalPrice | currency:'ARS':'symbol':'1.0-0' }}</div>
            <div class="text-sm text-gray-500">{{ item.unitPrice | currency:'ARS':'symbol':'1.0-0' }} c/u</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Sugerencias -->
    <div *ngIf="(calculatedOrder?.suggestions?.length || 0) > 0" class="suggestions mb-6">
      <h5 class="text-lg font-semibold text-gray-800 mb-3">Sugerencias:</h5>
      <div class="space-y-2">
        <div *ngFor="let suggestion of calculatedOrder?.suggestions || []" 
             class="flex items-start p-3 bg-yellow-50 border border-yellow-200 rounded-lg">
          <i class="bi bi-lightbulb text-yellow-600 mr-2 mt-0.5"></i>
          <span class="text-sm text-yellow-800">{{ suggestion }}</span>
        </div>
      </div>
    </div>

    <!-- Botones de acción -->
    <div class="flex flex-col sm:flex-row gap-4">
      <button 
        (click)="customizeOrder()"
        class="flex-1 px-6 py-3 bg-white border-2 border-caramel text-caramel rounded-lg hover:bg-caramel hover:text-white transition-all duration-300">
        <i class="bi bi-gear mr-2"></i>
        Personalizar Pedido
      </button>
      <button 
        (click)="proceedToOrderAction()"
        class="flex-1 px-6 py-3 bg-caramel text-white rounded-lg hover:bg-caramel-dark transition-all duration-300">
        <i class="bi bi-cart-check mr-2"></i>
        Proceder al Pedido
      </button>
    </div>
  </div>
</div>
